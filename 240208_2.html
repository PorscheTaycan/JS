<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" id="myinput" onkeyup="kup(event,this)">
    <div id="container" style= "display: flex;">
        <div onclick="next(event)">left</div>
        <img id = "myimg" src="img/trimage_2.jpg">

    <div onclick="next(event)">right</div>
    </div>
    image container
    <script>
        var myimg=document.getElementById('myimg');
        var origin_src = myimg.src;
        var myinput = document.getElementById('myinput');
        var imgarr = [];
        console.log(origin_src);

        function kup(e, obj)
        {
            if(e.keyCode==13)
            {
                
                for(var i =0; i<imgarr.length; i++)
                {
                  if(imgarr[i].endsWith(obj.value))
                  {
                    console.log(i+"idx에 있음");
                    obj.value="";
                    return;
                  }
                }
                imgarr.push(obj.value);
                obj.value="";

            }
            
            console.log(imgarr);
        }
        // function l(e)
        // {
        //     var point = 0;
        //     if(imgarr.length!=0)//이미지배열에 아무것도 없으면 돌리는게 의미가 없네.
        //     {
        //         console.log(myimg.src);
        //         var splited = myimg.src.split("/");//이미지파일명이 원하는데로 안 나와서 http://잘라야겠다.
        //         console.log(splited);
            
        //         var targetStr=splited[splited.length-2]+"/"+splited[splited.length-1];
        //         console.log(targetStr)
        //         console.log(imgarr.indexOf(targetStr), "ddddd");
        //         if(imgarr.indexOf(targetStr!=-1))//현재 이미지가 배열에 있는 앤가?
        //         {
        //             point= imgarr.indexOf(targetStr) //있으면 현재 이미지의 인덱스를 기준점으로 설정
        //             console.log(point , "dddddddd")
        //             if(point>0){//회전 고려
        //                 point--;
        //                 myimg.src=imgarr[point];
        //             }
        //             else  //현재 설정되어 있는 이미지가 배열의 첫 자리인 경우 -> 가장 마지막 사진을 보여줘야 되겠다.
        //             { 
                    
        //             myimg.src=imgarr[imgarr.length-1];  //length-1 : 마지막 것
        //             }
        //         }
        //         else  //현재 이미지가 배열에는 없는 애다.
        //         { 
        //             console.log("그거 없음", point); //시작점 0으로 잡겠음
        //             myimg.src=imgarr[point]//0번째 이미지 보여주겠음
        //         }
        //     }
        // }
        // function r(e)
        // {
        //     var point = 0;
        //     if(imgarr.length!=0)//이미지배열에 아무것도 없으면 돌리는게 의미가 없네.
        //     {
        //         console.log(myimg.src);
        //         var splited = myimg.src.split("/");//이미지파일명이 원하는데로 안 나와서 http://잘라야겠다.
        //         console.log(splited);
            
        //         var targetStr=splited[splited.length-2]+"/"+splited[splited.length-1];
        //         console.log(targetStr, "dddddddddddddddddddddddddddddddddd");
        //         console.log(imgarr.indexOf(targetStr), "dddddddddddfffffff")
        //         if(imgarr.indexOf(targetStr!=-1))//현재 이미지가 배열에 있는 앤가?
        //         {
        //             point= imgarr.indexOf(targetStr) //있으면 현재 이미지의 인덱스를 기준점으로 설정
        //             console.log(point,"----------r p")
        //             if(point<imgarr.length-1){//회전 고려
        //                 point++;
        //                 console.log(point , "ddddfffffdddd")
        //                 myimg.src=imgarr[point];
        //                 console.log(imgarr.length-1, "imggggggggggggg")
        //             }
        //             else  //현재 설정되어 있는 이미지가 배열의 첫 자리인 경우 -> 가장 마지막 사진을 보여줘야 되겠다.
        //             { 
        //             console.log(imgarr.length, "!!!!!!!")
        //             myimg.src=imgarr[imgarr.length-imgarr.length];  //length-1 : 마지막 것
        //             }
        //         }
        //         else  //현재 이미지가 배열에는 없는 애다.
        //         { 
        //             console.log("그거 없음", point); //시작점 0으로 잡겠음
        //             myimg.src=imgarr[point]//0번째 이미지 보여주겠음
        //         }
        //     }
        // }

        function next(e,obj){
            var point=0;
            console.log(obj.innerHTML)
            if(obj.innerHTML == "right"){
                point=imgarr.length-1;
            }
            if(imgarr.length!=0){
                var splited = myimg.src.split("/");
                var targetStr=splited[splited.length-2]+"/"+splited[splited.length-1];
                if(imgarr.indexOf(targetStr!=-1)){
                    point= imgarr.indexOf(targetStr)
                    if(obj.innerHTML!='right')
                    {
                        if(point>0){
                            point--;
                            myimg.src=imgarr[point];
                        }
                        else{
                            myimg.src = imgarr[imgarr.length-1];
                        }
                    }
                    else{
                        if(point<imgarr.length-1){
                            point++;
                            myimg.src=imgarr[point];
                        }
                        else{
                            myimg.src=imgarr[0];
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>