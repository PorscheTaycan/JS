<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <pre>
        #prompt로 입력하는 방식을 삭제하고
        #주사위에 마우스를 올리거나 클릭해서 여는 것이 아니라,
        #HTML DIV로 만든 버튼을 누르면 임의의 주사위 하나가 뒤집힌다.
        #prompt에 입력하던 '어떤숫자', '몇 개' 총 2가지 입력 값을
        #input창 2개를 생성해서 각각 입력 받는다.
        #getElementByID() 사용한다. 
    </pre>



<!-- 강사님 설명 -->
<img  class="imageBox" src="img/dice.png" alt = "이미지" >
<img  class="imageBox" src="img/dice.png" alt = "이미지"  >
<img  class="imageBox" src="img/dice.png" alt = "이미지"  >
<img  class="imageBox" src="img/dice.png" alt = "이미지" >
<img  class="imageBox" src="img/dice.png" alt = "이미지">
<input type="text" id="input1" value="" placeholder="숫자 입력">
<input type="text" id="input2" value="" placeholder="갯수 입력">

<div onclick="changeImg()">Button</div> 

<script>

// var a = document.getElementById('i1');
// var b = document.getElementById('i2');
// var c = document.getElementById('i3');
// var d = document.getElementById('i4');
// var e = document.getElementById('i5');

var objcol = document.getElementsByClassName('imageBox');
var objarr = Array.from(objcol);  //collection -> array로 변환
var imagearr = ["img/dice_1.png", "img/dice_2.png", "img/dice_3.png", "img/dice_4.png", "img/dice_5.png", "img/dice_6.png"];
var input1 = document.getElementById("input1");
var input2 = document.getElementById("input2");
var count = 0;

function shuffle(arr){
    var resultarr = [];
    var target = arr.length;
    for(var x=0;x<target;x++)
    {
        r=Math.floor(Math.random()*arr.length);
        resultarr.push(arr.splice(r-1,1)[0]);
    }
    return resultarr
    
    console.log(resultarr);
}
var domarr = shuffle(objarr);
        
function changeImg(){
    var objcol2 = document.getElementsByClassName('imageBox');
    if(domarr.length>=1)
    {
    domarr.pop().src= imagearr[Math.floor(Math.random()*imagearr.length)];
    }
    
    else
    {
 
        for(var i=0; i<objcol.length; i++){
            if(objcol[i].src.indexOf('img/dice_'+input1.value)!=-1)
            {
                count++;

            }
        }
            document.close();  //새로 만들어지는 문서 초기화 
            document.write("<div onclick='changeImg()'>Button</div> ");  //문서가 살아있음  -> 버튼을 만들기
            var range1= Math.floor(Math.random()*10)+1 //박스 수 1~20 개 사이로 랜덤
            
            
            for (var j=0; j<range1;j++)
            {
            document.write("<img class = 'imageBox' src='img/dice.png' alt = '이미지'>"); //이미지 5개 생성
            }
            var objcol3 = document.getElementsByClassName('imageBox');
            console.log(objcol3);
            console.log(document.body.children); //body 접근해서 바디의 자식들 컬렉션
            console.log(document.body.children[3],"ddddddd");  //컬렉션 인덱스 사용 가능
            console.log(document.body.children.length);  //컬렉션 길이 조회
            var sum = 0;
            for(var m=0; m<document.body.children.length;m++){  //자식 요소만큼 반복
                console.log(document.body.children[m].tagName)  //자식들의 태그 네임 전부 출력
                if(document.body.children[m].tagName=='IMG')  //이미지 태그 인 것만 검출
                {
                    console.log("이미지 태그 발견");
                    var x = document.body.children[m];  //img태그를 x로 객체화
                    console.log(x);//x를 출력
                    var rr = (Math.floor(Math.random()*6)+1);  //랜덤 1~6범위 생성
                    x.src = "img/dice_"+rr+".png";  //x 라는 이미지 객체에 1~6 사이의 랜덤 주사위 이미지
                    sum +=Number(x.src[31]);
                // console.log(typeof x.src[31]);
                // console.log(typeof Number(x.src[31]), "222222");
                console.log(sum);
                }
                var avg = sum/range1;
                console.log(avg);
            console.log("평균은" + avg + "입니다.");
            }
            // var sum = 0;

            // for (var p= 0; p<range1; p++){
            //     sum +=Number(x.src[31]);
            //     // console.log(typeof x.src[31]);
            //     // console.log(typeof Number(x.src[31]), "222222");
            //     console.log(x.src[31]);
            // }
            // var avg = sum/range1;

            // console.log(avg);
            // console.log("평균은" + avg + "입니다.");
            if(count==input2.value){
                console.log("일치");
            }
            else
            {
                console.log("불일치");
            }
            
    }
}

    </script>
</body>
</html>